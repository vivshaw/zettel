---
tags: courses, postgres, db
---

- # Introduction
  collapsed:: true
	- why care about db performance? "as fast as your stack is, it's only as fast as your slowest query"
	- Aaron uses TablePlus as a postgres GUI, and postgres.app as an ez GUI installer
	- postgres isn't for everything! for example, elasticsearch is generally gonna be better for search
- # Data Types
	- a postgres instance can contain multiple DBs, and each DB can contain multiple schemas.
	- you can think of a [[db/schema]] in Postgres almost like a [[namespace]]. postgres can have multiple schemas going, unlike many other DBs.
	- but generally when talking about schemas we're referring to the structure, just like other DBs
	- keep tables schemas **small**, **simple**, and **representative of your data**. it's your job to know the universe of possibilities, compare it to the shape of your data, and build the best postgres representation of it that you can.
	- good representations can help with low cognitive overhead, performance, and domain logic
	- ## Integers
		- choose a numeric data type that is representative (don't mangle your data to save bytes!) and compact (don't use a data type that goes to a billion for data that only goes to 100!)
		- postgres doesn't have [[unsigned integers]], similar to [[SQLite]], but different from [[MySQL]]
		- `smallint` goes from -32768 - 32767
			- it's also known as `int2`: an integer that takes 2 bytes
		- `integer`, aka `int4`, goes from -2,147,483,647 - 2,147,483,647
		- `bigint`, aka `int8`, goes from -9,223,372,036,854,775,808 - 9,223,372,036,854,775,807
			- default to this for primary keys! give your data room to grow
	- ## Numerics
		- an [[arbitrary-precision]] type. these support decimals, and exact accuracy. but they're very slow.
		- aka `decimal`
		- you can also use these to store values larger than a `bigint`
		- takes two arguments: `precision` (how many significant unrounded digits to allow), and `scale` (how many digits to the right of the decimal point)
			- a negative `scale` will round x number of places to the _left_ of the decimal
	- ## Floating point
		- limited-precision but fast decimal numbers
		- `real` aka `float4` is 4 bytes: 1e-37 - 1e37
		- `double` aka `float8` is 8 bytes: 1e-307 - 1e307
	- ## Storing money
		- there is a type called `money`... but don't use it!
			- it will automatically round to the nearest cent!
			- its currency formatting depends only on the `ls_monetary` setting, which can be confusing. changing that setting will display as a different currency, while keeping the values the same.
		- instead, either:
			- store it as an exact integer (e.g., in cents)
			- store it as a `numeric` for exact precision decimal parts
	- ## NaNs and infinity
		- a `float` or open-ended `numeric` has `Infinity`, but not a closed `numeric`!
		- in terms of sorting, `NaN` sorts as larger than all numbers, even `Infinity`
		- all `NaNs` are equal to one another. all `Infinity`s are equal to one another.
		- `NaN`^0 = 1
		-